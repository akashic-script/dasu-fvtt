<form class="reroll-form">
  <div class="form-section">
    <h4>{{localize "DASU.Reroll.Dialog.CurrentRoll"}}</h4>
    <div class="dice-container pool">
      {{#each rollResults}}
        <div class="die {{#if (gte this 4)}}success{{/if}}">{{this}}</div>
      {{/each}}
    </div>
    <div class="pool-summary">
      <div class="successes">
        <span class="label">{{localize "DASU.Reroll.Dialog.Successes"}}:</span>
        <span class="value">{{successCount}}</span>
      </div>
      {{#if isCritical}}
        <div class="critical-badge">{{localize "DASU.Reroll.Dialog.Critical"}}</div>
      {{/if}}
    </div>
  </div>

  <div class="form-section pool-info">
    <div class="info-row">
      <span class="label">{{localize "DASU.Reroll.Dialog.TotalDice"}}:</span>
      <span class="value">{{totalDice}}</span>
    </div>
    <div class="info-row">
      <span class="label">{{localize "DASU.Reroll.Dialog.CritThreshold"}}:</span>
      <span class="value">{{critThreshold}}</span>
    </div>
  </div>

  <div class="form-section">
    <h4>{{localize "DASU.Reroll.Dialog.RerollOptions"}}</h4>
    <p class="hint">{{localize "DASU.Reroll.Dialog.ClickDiceHint"}}</p>
    <div class="reroll-checkboxes">
      <label class="reroll-option">
        <input type="checkbox" name="reroll-all">
        <span class="both-icon">⚄⚄</span>
        <span class="reroll-label">{{localize "DASU.Reroll.Dialog.RerollAll"}}</span>
      </label>
      <label class="reroll-option">
        <input type="checkbox" name="reroll-mod">
        <span class="mod-icon">±</span>
        <span class="reroll-label">{{localize "DASU.Reroll.Dialog.AdjustModifier"}}</span>
      </label>
    </div>
  </div>

  <div class="form-section modifier-group" style="display: none;">
    <div class="form-group">
      <label for="new-modifier">{{localize "DASU.Reroll.Dialog.NewModifier"}}</label>
      <input type="number" name="new-modifier" id="new-modifier" value="{{currentMod}}" min="-20" max="20" step="1">
    </div>
  </div>
</form>
